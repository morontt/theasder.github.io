<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="styles/styles.css" type="text/css">
	<title>Thrifty – учет ваших личных финансов</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" ></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var touch = $('#touch-menu');
            var menu = $('.nav');

            $(touch).on('click', function(e) {
                e.preventDefault();
                menu.slideToggle();
            });
            $(window).resize(function(){
                var wid = $(window).width();
                if(wid > 760 && menu.is(':hidden')) {
                    menu.removeAttr('style');
                }
            });
        });
    </script>
    <script src="js/angular.min.js" type="text/javascript"></script>
    <script src="js/node_modules/chart.js/dist/Chart.min.js"></script>
    <script src="js/node_modules/angular-chart.js/dist/angular-chart.min.js"></script>
    <script src="js/app.js"></script>
</head>
<body ng-app="app" ng-controller="main">
    <header>
        <div class="container clearfix">
            <div class="logo">
                <a href="#">thrifty</a>
            </div>
            <a href="#" id="touch-menu">&#9776;</a>
            <nav>
                <ul class="nav clearfix">
                    <li><a href="#" class="active">Главная</a></li>
                    <li><a href="#">Вошли как guest</a></li>
                    <li><a href="#">Выйти</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section>
        <div class="container clearfix">
            <div id="content">
                <h1>{{ label }}: {{ balance }} руб.</h1>
                <h2>Добавить транзакцию</h2>
                <form method="post">
                    <div class="row">
                        <div class="col-md-2">
                            <input type="text" id="money" name="money" placeholder="Сколько рублей?" ng-model="money"
                                                                                                            autofocus>
                        </div>
                        <div class="col-md-1">
                            <div class="select-style">
                                <select id="action" name="action" ng-model="action" ng-change="changeCategories()">
                                    <option value="received">получено</option>
                                    <option value="spent" selected>потрачено</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="select-style">
                                <select id="category" name="category" ng-model="category"
                                        ng-options="category for category in categories">
                                    <option value="" selected>--Выберите категорию--</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="description" name="description"
                                   placeholder="Добавьте описание."
                                   ng-model="description" ng-keypress="addTask($event)">

                        </div>
                        <div class="col-md-0">
                            <button type="submit" class="btn" id="add-transaction"
                                    ng-click="addTransaction()">Готово!</button>
                        </div>
                    </div>
                </form>

                <div class="row select-style" id="timeSelectMobile">
                    <select ng-model="selectedTimeFilter"
                            ng-options="filter.name for filter in timeFilters"
                            ng-change="selectTimeFilter(selectedTimeFilter)">
                    </select>
                </div>

                <div class="row filter">
                    <div class="col-md-6" ng-repeat="filter in filters">
                        <a href="#" ng-class="{activeFilter: filter===selectedFilter}"
                                    ng-click="selectFilter(filter)"
                                    ng-bind="filter.name"></a>
                    </div>
                    <div class="col-md-7">
                        <div class="select-style" id="timeSelect">
                            <select id="timeFilter" ng-model="selectedTimeFilter"
                                    ng-options="filter.name for filter in timeFilters"
                                    ng-change="selectTimeFilter(selectedTimeFilter)">
                            </select>
                        </div>
                    </div>
                </div>

                <div id="data" ng-repeat="transaction in getFilteredTransactions()">
                    <div class="wrap">
                        <div class="clearfix">
                            <div class="right cross">
                                <a href="#" ng-click="deleteTransaction($index)">&#10005;</a>
                            </div>
                        </div>
                        <div class="clearfix transactions">
                            <div class="left">
                                <div class="val {{ transaction.decoration }}" ng-bind="transaction.value"></div>
                                <div class="time">{{ transaction.time | date: 'dd.MM.yyyy HH:mm:ss' }}</div>
                            </div>
                            <div class="right">
                                <div class="descr" ng-bind="transaction.description"></div>
                                <div class="cat" ng-bind="transaction.category"
                                                 ng-class="{none: transaction.category === transaction.description}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--<div class="graphs row" ng-class="{selectedGraph: selectedGraph === 'Все'}"-->
                     <!--ng-controller="allCtrl">-->
                    <!--<canvas class="chart chart-doughnut"-->
                            <!--chart-data="data" chart-labels="labels">-->
                    <!--</canvas>-->
                <!--</div>-->

                <div class="graphs row" ng-class="{selectedGraph: selectedGraph === 'Траты'}"
                     ng-controller="spendCtrl">
                    <canvas class="chart chart-doughnut"
                            chart-data="data" chart-labels="labels">
                    </canvas>
                </div>

                <div class="graphs row"  ng-class="{selectedGraph: selectedGraph === 'Доходы'}"
                     ng-controller="profitCtrl">
                    <canvas class="chart chart-doughnut"
                            chart-data="data" chart-labels="labels">
                    </canvas>
                </div>
            </div>
        </div>
    </section>
</body>
</html>