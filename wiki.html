<html>
    <head> 
        <title>
            Генератор ссылок на вики-страницы вк
        </title>
        <!-- Latest compiled and minified CSS -->

        <!-- <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->
        <link rel="stylesheet" href="bootstrap.min.css">
        <style type="text/css">
            .container
            {
                width: 500px;
                margin-top: 10px;
            }

            .container input
            {
                margin: 10px;
            }

            .container input[type=text]
            {
                width: 100%;
            }
            .container textarea
            {
                width: 100%;
                margin-top: 10px;
            }
            #extra
            {
                margin-top: 10px;
            }
        </style>
        <script type="text/javascript" src="cookie.js"></script>
        <script type="text/javascript">

            //print_url()
            //button.onclick = function() 
            function print_url()
            {
                var publ = document.getElementById("publ").value;
                var wiki = document.getElementById("wiki").value;
                var answer = document.getElementById("answer");
                answer.innerHTML = "<a target='_blank' href='http://vk.com/pages?oid=-" + publ + "&p=" + wiki.replace(/\s+/g, "_")  + "'>" + wiki  + "</a>";
                setCookie("wiki", answer.innerHTML);
                setCookie("publ", publ);
            };

            function print_urls()
            {
                var cont = document.getElementById("mult").value;
                //cont = cont.replace(/\n/g, "<br />");
                cont = cont.split('\n');
                var url_publ = document.getElementById("publ").value;
                out = "";
                for(var i = 0; i < cont.length; i++)
                    out += "<a target='_blank' href='http://vk.com/pages?oid=-" + url_publ + "&p=" + cont[i].replace(/\s+/g, "_") + "'>" + cont[i] + "</a><br />";
                links.innerHTML = out;
                setCookie("publ", url_publ);
                setCookie("menu", out);
            };
        </script>

        <script type="text/javascript" src="http://vk.com/js/api/openapi.js?95"></script>
    </head>

    <body>
        <script type="text/javascript">
            VK.init({apiId: 4323166, onlyWidgets: true});
        </script>
        <div class="container">
            <h3> Генератор ссылок на вики-страницы для пабликов и групп </h3>
            <!-- Put this div tag to the place, where the Like block will be -->
            <div id="vk_like"></div>
            <script type="text/javascript">
            VK.Widgets.Like("vk_like", {type: "button"}, );
            </script>
 
                ID паблика или группы <br />
                <input type="text" id="publ"><br />
                Название одной вики-страницы (закончить ввод можно через Enter)<br />
                <input type="text" id="wiki" onKeyUp="if(event.keyCode == 13) print_url();"> <br />
                <input type="submit" id="ok" value="Готово!" onClick="print_url();">
                <input type="submit" value="Удалить ссылки" onClick="document.getElementById('answer').innerHTML = '';deleteCookie('wiki');"> 
                <div id="answer"></div> 
                <div id="extra">
                Названия нескольких вики-страниц (записывать в столбик) <br />
                <textarea rows="6" id="mult"></textarea>
                <!-- <input type="text" id="mult"> <br />
                --><input type="submit" id="ok_mult" value="Готово!" onClick="print_urls();">
                <input type="submit" value="Удалить ссылки" onClick="document.getElementById('links').innerHTML = '';deleteCookie('menu');">
                <div id="links"></div> <br />
                </div>
        </div>
        <script type="text/javascript">
            if(getCookie("publ") != undefined)
            {
                document.getElementById("publ").value = getCookie("publ");
            }
            else
            {
                document.getElementById("publ").value = "54530371";
            }
            
            if(getCookie("wiki") != undefined)
            {
                document.getElementById("answer").innerHTML = getCookie("wiki");
            }
            else
            {
                document.getElementById("answer").innerHTML = "";
            }

            if(getCookie("menu") != undefined)
                document.getElementById("links").innerHTML = getCookie("menu");
        </script>
    </body>
</html>
